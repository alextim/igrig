# igryg.com - IGRIG <!-- omit in toc -->

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)[![Netlify Status](https://api.netlify.com/api/v1/badges/35a6f056-1bb6-46d7-b5b1-09df51b948b6/deploy-status)](https://app.netlify.com/sites/igrig/deploys)

Этот проект Open Source и доступен под лицезией [MIT](https://github.com/alextim/igrig/blob/main/LICENSE)

**Оглавление**

- [Введение](#введение)
  - [Особенности](#особенности)
  - [Лимиты бесплатных сервисов (на 1 марта 2021 г)](#лимиты-бесплатных-сервисов-на-1-марта-2021-г)
    - [Netlify](#netlify)
      - [Хостинг](#хостинг)
- [Требования к владельцу сайта](#требования-к-владельцу-сайта)
- [Защита данных пользователя](#защита-данных-пользователя)
  - [Куки (cookie)](#куки-cookie)
  - [Хранение данных пользователя](#хранение-данных-пользователя)
- [Аббревиатуры](#аббревиатуры)
- [Публикация изменений](#публикация-изменений)
- [Разрешение проблем построения сайта](#разрешение-проблем-построения-сайта)
  - [Сайт не обновляется](#сайт-не-обновляется)
- [Правила именования файлов](#правила-именования-файлов)
- [SEO](#seo)
  - [Поля Frontmatter](#поля-frontmatter)
  - [Карта сайта (**Sitemap**)](#карта-сайта-sitemap)
- [Новостная лента - RSS](#новостная-лента---rss)
- [Специальные изображения](#специальные-изображения)
- [Ссылки](#ссылки)
  - [Внешние ссылки](#внешние-ссылки)
  - [Внутренние ссылки](#внутренние-ссылки)
- [Настройки](#настройки)
  - [Общие](#общие)
  - [Языки](#языки)
  - [Поисковые роботы](#поисковые-роботы)
- [Содержимое сайта](#содержимое-сайта)
- [Устройство файла страницы](#устройство-файла-страницы)
  - [Основной текст](#основной-текст)
  - [Встака видео с YouTube](#встака-видео-с-youtube)
  - [Варианты вставки изображений](#варианты-вставки-изображений)
    - [Синтаксис Markdown](#синтаксис-markdown)
    - [Синтаксис HTML - тег **img**](#синтаксис-html---тег-img)
      - [Одиночное изображение без стилей](#одиночное-изображение-без-стилей)
      - [С предустановленными стилями](#с-предустановленными-стилями)
  - [Описание полей Frontmatter](#описание-полей-frontmatter)
  - [Правила формирования путей](#правила-формирования-путей)
- [Страницы сайта](#страницы-сайта)
  - [Страница вида "Пост"](#страница-вида-пост)
  - [Страница вида "Фотопроект"](#страница-вида-фотопроект)
  - [Страница вида "Фотоcерия"](#страница-вида-фотоcерия)
  - [Собственно Страницы](#собственно-страницы)
    - [Главная страница](#главная-страница)
    - [Cтраница "Блог"](#cтраница-блог)
    - [Cтраница "Список тегов"](#cтраница-список-тегов)
    - [Cтраница "Путешествия с тегом: ????"](#cтраница-путешествия-с-тегом-)
    - [Cтраница "Фотопроекты"](#cтраница-фотопроекты)
    - [Cтраница "Фотоcерии"](#cтраница-фотоcерии)
    - [Cтраница "Обо мне / Контакты"](#cтраница-обо-мне--контакты)
    - [Cтраница "404"](#cтраница-404)
- [Данные для формирования элементов сайта](#данные-для-формирования-элементов-сайта)
  - [Общие для всех языков](#общие-для-всех-языков)
    - [Список полей](#список-полей)
  - [Языкозависимые данные](#языкозависимые-данные)
    - [Главное меню](#главное-меню)
    - [Ссылки на социальные сети](#ссылки-на-социальные-сети)
    - [Адрес](#адрес)
    - [Переводы](#переводы)

## Введение

### Особенности

Этот сайт создан по технологии [JAMStack](https://jamstack.org/).

Для хранения данных используются форматы [YAML](https://yaml.org/) и [Markdown](https://daringfireball.net/projects/markdown/).

Исходные файлы сайта создаются, хранятся и редактируются на локальном компьютере.
Изменения данных отслеживаются распределенной системой контроля версий [Git](https://git-scm.com/).

По команде пользователя система контроля версий [Git](https://git-scm.com/) синхронизирует изменения данных на локальном компьютере с облачным репозиторием [GitHub](https://github.com/).

Облачный репозиторий [GitHub](https://github.com/) связан с облачным провайдером [Netlify](https://netlify.com), который подписан на изменения в вашем репозитории.

После каждого изменения провайдер автоматически скачивает обновленные данные из вашего репозитория себе, запускает генератор статических сайтов [Gatsby](https://www.gatsbyjs.com/), компилирует и публикует обновленную версию сайта.

Технология JAMStack в комлексе с бессерверными вычислениями позволяют не разворачивать собственный сервер, избежать затрат на хостинг и обслуживание. Статический сайт безопасен, устойчив к атакам и вирусам, обладает хорошим быстродействием.


### Лимиты бесплатных сервисов (на 1 марта 2021 г)

#### Netlify

Предполагается, что сайт попадает под условия пакета "STARTER" компании Netlify.
Конечное решение о возможности бесплатного размещения вашего сайта принимает компания Netlify.
Подробнее [здесь](https://www.netlify.com/tos).

##### Хостинг

Время на построение сайта (build time) - 300 минут в месяц.

В среднем ваш двуязычный сайт, состоящий из 100 страниц, строится менее, чем за 4 минуты. Итого вы можете в рамках бесплатного пакета обновить сайт около 80 раз в месяц или 2-3 раза в сутки.


## Требования к владельцу сайта

- Элементарный английский.
- Умение пользоваться командной строкой.
- Умение пользоваться текстовым и графическим редакторами.
- Понимание SEO.
- Базовые знания форматов HTML, Markdown и YAML.
  
В сети есть разнообразные ресурсы об устройстве этих форматов. Ниже несколько ссылок для ознакомления.

HTML:

- [Wiki](https://ru.wikipedia.org/wiki/HTML)

Markdown:

- [Краткое руководство](https://paulradzkov.com/2014/markdown_cheatsheet/)
- [markdownguide.org](https://www.markdownguide.org/)

:bulb: Для быстрого обучения формату Markdown удобно воспользоваться on-line редактором. On-line редактор позволяет править текст с разметкой Markdown в окне браузера и сразу видеть результаты. Например [dillinger](https://dillinger.io/).

YAML:

- [Wiki](https://ru.wikipedia.org/wiki/YAML)
- [Работа в YAML](https://starkovden.github.io/working-in-YAML.html)
- [YAML Ain’t Markup Language (YAML™) Version 1.2](https://yaml.org/spec/1.2/spec.html)

## Защита данных пользователя

### Куки (cookie)

Сайт не генерирует своих куки, но использует чужие сервисы, которые их создают.

Сторонние куки

| Сервис           | Где                                                | Комментарий
|  ---             | ----                                               | ----
| Google Analytics | Все страницы сайта                                 | Можно отключить, но не будет аналитики
| Youtube          | Только на той странице, где вы сами вставили видео | Не пользоваться

### Хранение данных пользователя

Сайт не хранит данные пользователя.

## Аббревиатуры

- `[CONTENT_DIR]` - имя папки на локальном компьютере с данными сайта.
- `[PROJECT_DIR]` - имя папки на локальном компьютере с кодом сайта.
- `{locale}` - язык, `en` или `ru`

## Публикация изменений


Сначала загружаем самую свежую версию данных сайта из удаленного репозитория. Это необходимо сделать до начала каких-либо правок на локальном компьютере, чтобы избежать ручного разрешения конфликтов слияния версий разных пользователей. Если правка данных производится только одним пользователем и на одном компьютере, то это выполнять нет неободимости.

Правим данные на локальном компьютере, сохраняем результаты работы в локальный репозиторий и затем синхронизируем локальный репозиторий с удаленным.

Netlify сам отследит все изменения в удаленном репозитории с кодом, скомпилирует и опубликует обновленную версию сайта.

1. Запустите Visual Studio Code
2. Откройте Teminal: меню Teminal -> New Terminal
3. Получите последнюю версию данных из удаленного защищенного репозитория
   В окне Teminal выполните команду
   ```bush
   git pull
   ```
   Если правка данных производится только одним пользователем и на одном компьютере, то этот шаг можно пропустить.
4. Отредактируйте и сохраните данные сайта на локальном компьютере: папка `[CONTENT_DIR]`.
5. Сохранение результатов редактирования в локальный репозиторий и оновление данных в удаленном.
   В окне Teminal выполните команды
   ```bush
   git add .
   git commit -m "ВАШ КОММЕНТАРИЙ"
   git push
   ```

Netlify отслеживает все изменения в удаленном репозитории, автоматически cкомпилирует и опубликует обновленный сайт.

## Разрешение проблем построения сайта

### Сайт не обновляется

1. Зайдите в вашу учетную запись на [Netlify](https://netlify.com).
2. Нажмите **Sites**
3. Выберите ваш сайт
4. Нажмите **Deploys**


Вы попадете на страницу со списком всех компиляций вашего сайта, отсортированный по времени в порядке убывания.


Если последняя компиляция в статусе **Published** (зеленая метка)

1. Нажмите кнопку **Trigger deploy**
1. Нажмите **Clear cache and deploy site**
1. Очистите кеш браузера, сайт должен обновиться.


Если последняя компиляция в статусе **Failed** (красная метка)

1. Нажмите на стрелочку `>` справа для перехода на страницу **Deploy details**
2. Просмотрите содержимое окна **Deploy log** и найдите описание ошибки. Ошибка будет подсвечена красным.
Скорее всего у вас не правильно оформлен файл Markdown или Yaml. В логе будет отражено название файла и место, где неправильно оформлено. Если это так, то исправьте ошибки оформления на локальной машине, сделайте `commit` и `push`. Сайт будет построен автоматически.

Если причина другая, то потребуется помощь программиста.

## Правила именования файлов

- самообъясняющие недлинные имена;
- только English алфавит;
- все символы в нижнем регистре;
- без цифр;
- без пробелов;
- используйте дефис `-` для разделения слов;
- без точек, подчеркиваний или специальных символов;
- желательно наличие ключевых слов в имени файла для SEO.

:bulb: Транслитерация допустима, но во избежании путаницы и с прицелом на будущее правильнее именовать на английском языке.

:heavy_check_mark: хорошо:

- `weekend-with-family.jpg`
- `my-awesome-file.png`

:x: плохо:

- `chto-chistye-okna-mogut-sdelat-dlya-pribyli-vashej-kompanii.txt` - очень длиное имя в сочетании с транслитерацией, в результате трудно читаемое
- `weekend-with-family.JPG` - расширение имени файла в верхнем регистре
- `asdasda-cajjqq1sd.jpg` - непонятное имя
- `мой-красивый-файл.jpg`- не английский алфавит
- `MyAwesomeFile.jpg` - заглавные буквы
- `moi-prijatnii-fail.jpg` - транслитерация
- `my_awesome_file.jpg` - подчеркивания
- `my.awesome.file.jpg` - точки

[Рекомендации](https://developers.google.com/style/filenames) от Google.

## SEO

Для поисковика содержимое страницы должно быть по меньшей мере 300 слов.

Источник: [The Beginner's Guide to SEO](https://moz.com/beginners-guide-to-seo)

### Поля Frontmatter

| Имя поля | Рекомендованая длина  | Значение | Первоисточник  | Комментарий                             |
| ------   | ---------             | -------- | ----------     | --------------------------------------- |
| **metaTitle**         | до 50-60 символов. строка будет обрезана гуглом визуально до 600px на странице SERP| `Главная ключевая фраза` `Второстепенная ключевая фраза` \| `Ваш бренд`<br>Уникальное для каждой страницы сайта.    | [What is a meta title tag?](https://moz.com/learn/seo/title-tag), [Create good titles and snippets in Search Results](https://support.google.com/webmasters/answer/35624?hl=en) | Если **metaTitle** отсутствует, то поле **title** будет использовано          |
| **metaDescription**   | 50-160 символов  | 1 параграф из 1-2 предложений. Без кавычек `"` и спецсимволов.<br>Уникальное для каждой страницы сайта.      | [What is a meta description?](https://moz.com/learn/seo/meta-description), [How to create the right meta description](https://yoast.com/meta-descriptions/)                     | Если **metaDescription** отсутствует, то поле **headline** будет использовано |
| cover: **alt**               | до 125 символов | | [What is Alt Text?](https://moz.com/learn/seo/alt-text)                                                                                                                         |                                                          |
| image: **alt**


:bulb: Для полей **metaTitle** и **metaDescription** не пользуйтесь всеми заглавными буквами, т.к. они хуже читаются и занимают больше места при выводе на странице SERP (Search Engine Result Page).


:warning: В случае, если отсутствуют и **metaDescription** и **headline**, то будет использовано соответствующее языку страницы содержимое поля **siteDescription** из файла конфигурации `[PROJECT_DIR]/config/locales.js`.

### Карта сайта (**Sitemap**)

Во время финальной сборки сайта специальный плагин `at-sitemap` автоматически выполняет ряд действий.

1. Генерирует два файла **Sitemap**:
   - `sitemap.xml` -  с учетом языка для страниц;
   - `image-sitemap.xml` - без учета языка для изображений.
2. Добавляет в `<HEAD>` каждой страницы два линка на эти файлы.

Изображения с незаполненным альтернативным текстом **ALT** по умолчанию исключаются из карты сайта (это определяется настройками плагина в файле `gatsby-config.js`).

Руководства от Google

- [О файлах Sitemap](https://developers.google.com/search/docs/advanced/sitemaps/overview?hl=ru)
- [Отправка локализованных версий страницы в Google](https://developers.google.com/search/docs/advanced/crawling/localized-versions?hl=ru)
- [Файлы Sitemap для изображений](https://developers.google.com/search/docs/advanced/sitemaps/image-sitemaps?hl=ru)

## Новостная лента - RSS

Во время компиляции в корне сайта создается файл `rss.xml`. В него включаются тридцать последних постов согласно даты публикации.

Подробнее о RSS [здесь](https://ru.wikipedia.org/wiki/RSS).

## Специальные изображения

Пути указаны относительно папки `[PROJECT_DIR]`.

| №  | Назначение  | Имя файла             | Папка                             | Ш : В   | Размер, px  | Кол-во
| ---|-----------  |---                    |---                                |  ---:   |        ---: |---
|  1 | Site        | favicon.ico           | static/                           | 1 : 1   |   16 x 16   | 1
|    |             |                       |                                   |         |             |
|  2 | OpenGraph   | banner-`{locale}`.jpg | static/assets/images/og/          | 1.9 : 1 | 1200 x 630  | 1 на `locale`
|    |             |                       |                                   |         |             |
|  3 | Twitter     | banner-`{locale}`.jpg | static/assets/images/twitter/1x1/ | 1 : 1   |  450 x 450  | 1 на `locale`
|  4 |             | banner-`{locale}`.jpg | static/assets/images/twitter/2x1/ | 2 : 1   |  600 x 300  | 1 на `locale`
|    |             |                       |                                   |         |             |
|  5 | schema.org  | logo.svg              | static/assets/images/             |         |             | 1
|    |             |                       |                                   |         |             |
|  6 | webmainfest | icon.png              | src/assets/images/                | 1 : 1   | > 512 x 512 | 1
|    |             |                       |                                   |         |             |
|  7 | Hero        | hero-480w.jpg         | static/assets/images/hero/        | 9 : 16  |  480 x  853 | 1
|  8 |             | hero-1024.jpg         |                                   |  4 : 3  | 1024 x  768 | 1
|  9 |             | hero-1920w.jpg        |                                   | 16 : 9  | 1920 x 1080 | 1


*Hero - фоновое изображение на Home page.*

*Установите, если надо, свои размеры изображений для OpenGraph и Twitter в файле `[PROJECT_DIR]/config/website.js`.*

*Для Facebook OpenGraph и Twitter рекомендуется любое красивое фото с наложенным поверх лого.*

Источники для ознакомления:

- [favicon.ico](https://en.wikipedia.org/wiki/Favicon)
- [Facebook OpenGrpah](https://developers.facebook.com/docs/sharing/best-practices#images)
- [Twitter Card](https://developer.twitter.com/en/docs/twitter-for-websites/cards/overview/summary-card-with-large-image)
- [Местная компания](https://developers.google.com/search/docs/data-types/local-business?hl=ru)
- [Логотип](https://developers.google.com/search/docs/data-types/logo?hl=ru)
- [Add a web app manifest](https://web.dev/add-manifest/)

## Ссылки

Ссылки разделяются на внутренние и внешние. Внутренние ссылки ведут на ресурсы внутри сайта. Внешние ссылки ведут на ресурсы на чужих сайтах. Ссылки могут быть оформлены как в формате **Markdown** так и в формате **HTML**.

### Внешние ссылки

Ссылки на _внешние сайты_ потенциально небезопасны и могут ухудшить SEO.
Чтобы защитить ваш сайт и не навредить SEO оформляйте ссылки на внешние сайты в формате **HTML** и всегда добавляйте атрибут `rel="nofollow noreferrer noopener"`.

А добавление аттрибута `target="_blank"` заставит браузер открыть сторонний сайт в новой вкладке, а не просто уведет пользователя с вашего сайта.

:heavy_check_mark: хорошо:

```html
<a href="http://untrusted-site.com/" target="_blank" rel="nofollow noreferrer noopener">
  Что-то на чужом сайте
</a>
```

:x: плохо:

```markdown
[Что-то на чужом сайте](http://untrusted-site.com/)

<a href="http://untrusted-site.com/">Что-то на чужом сайте</a>
```

Исключением являются ссылки на страницы из чужих сайтов, которым вы доверяете, с правильно оформленными **беклинками** на ваш сайт.

:bulb: **Беклинки** очень важны для SEO.

Оформлять такие ссылки надо так:

```html
<a href="http://rada.com.ua/rus/catalog/62609/"
  target="_blank" rel="noopener">
  Компания "Снежный Барс"
</a>
```


Более подробно в [рекомендациях](https://developers.google.com/style/links-external) от Google.

### Внутренние ссылки

Внутренние ссылки предназначены для осуществления перехода между страницами внутри сайта.

:bulb: Для того, чтобы в будущем было легче отслеживать переходы по внутренним ссылкам сайта в **Google Analytics**  всегда добавляйте косую черту `/` (слеш) в конце ссылки.

Примеры ссылок на ресурсы английской версии сайта.
Так как в настройках сайта язык `en` задан главным, то префикс языка к пути не добавляется.

```markdown
[Home](/)

[My awesome project](/my-awesome-project/)
```

Ссылки на все русскоязычные ресурсы сайта начинаются с префикса языка `/ru/`.

```markdown
[Главная](/ru/)

[Мой красивый проект](/ru/my-awesome-project/)
```

Markdown позволяет вставлять ссылки в формате HTML.

```html
<a href="/">Home</a>

<a href="/my-awesome-project/">My awesome project</a>


<a href="/ru/">Главная</a>

<a href="/ru/my-awesome-project/">Мой красивый проект</a>
```

## Настройки

Настройки сайта находятся в двух JavaScript-файлах:

- `[PROJECT_DIR]/config/locales.js`
- `[PROJECT_DIR]/config/website.js`

:bulb: Если необходима настройка, то рекомендуется привлечение :sunglasses: программиста!

### Общие

Файл: `[PROJECT_DIR]/config/website.js`

Обязательные поля:

- **siteUrl**
Измените это `https://igrig.netlify.app` на действительный адрес сайта (БЕЗ СЛЭША В КОНЦЕ!).

- **noRobots**
`true` если вы хотите запретить индексирования сайта (добавляет в хедер серверного ответа `X-Robots-Tag: noindex, nofollow`).


- **content**
Имя репозитория с данными.


Оставьте значения нижеперечисленных переменных пустыми, если вы не используете или Google Analytics или Facebook App или Twitter:

- **googleAnalyticsID**
Идентификатор отслеживания представляет собой строку вида UA-000000-2. Это обязательный элемент кода отслеживания, по которому Google Аналитика определяет, в какой аккаунт и ресурс передавать данные.  


- **fbAppID**
Чтобы воспользоваться статистикой Facebook, добавьте на страницу ID приложения. Статистика позволяет просматривать информацию о переходах на ваш сайт из Facebook. ID приложения указан в панели приложений.  


- **twitterSite**
- **twitterCreator**

### Языки

`en` и `ru`


Файл: `[PROJECT_DIR]/src/config/locales.js`

По этому файлу во время компиляции сайта добавляется префикс языка к адресам страниц и создается переключатель языка.

Назначение переменных описано в комментариях в самом файле.

### Поисковые роботы

:warning: По умолчанию индексирование поисковиками запрещено.

Если вы хотите, что бы ваш сайт был проиндексирован **Google** и другими, то внесите изменения в файл  `[PROJECT_DIR]/config/website.js`.

Нужно изменить значение константы **noRobots** на `false`.

Идексирование запрещено:

```js
  /* Disable Robots */
  noRobots: true,
```  

Идексирование разрешено:

```js
  /* Disable Robots */
  noRobots: false,
```  


## Содержимое сайта

Все исходные данные сайта находятся в папке `[CONTENT_DIR]` на локальном компьютере. Изменения в файлах ослеживаются системой контроля версий - `Git`.


Вспомогательные данные хранятся в формате YAML в папке `[CONTENT_DIR]/data`. Из вспомогательных данных генерируются элементы страниц: меню, списки телефонов, переводы, адрес и тп.

Исходные данные для создания самих страниц храняться в файлах с расширением `.md` в формате Markdown.

Файлы с исходными данными это только содержимое сайта. И больше ничего. Структуры в файлах нужны только для удобства хранения и редактирования.

На этапе компиляции эти данные будут прочитаны программой сборки, и в соответствии с логикой программы будут добавлены запрограммированные HTML-теги (H1, H2, P и тп) и отдельно заданы необходимые стили (размер шрифта, отступы, цвет и тд).

:bulb: Внешний вид на экране зависит только от заданного стиля, а не от тега. Внешний вид никак не связан с исходными данными.

Предлагается следующая организация хранения файлов страниц.
Для каждой страницы создается отдельная папка. В ней файлы с содержимым страниц и подпапка `./images` для хранения изображений.

:exclamation: Важно! Для каждой страницы сайта обязательно создавайте переведеную версию согласно языковых насторек сайта. Именуйте файлы так, чтобы результирующие пути отличались только префиксом языка.
Если, например, у вас указаны два языка в настройках сайта, то необходимо создавать по две версии страницы с совпадающим после префикса языка путем.

Шаблон полного имени файла:
`{ИМЯ-ФАЙЛА}.{locale}.md`

`{ИМЯ-ФАЙЛА}`: английский алфавит в нижнем регистре, без пробелов, точек или подчеркиваний.

Специальное имя **index** (объяснение в разделе **[Правила формирования путей](#правила-формирования-путей)**).

Пример правильно именованных файлов:

```file
index.en.md
index.ru.md

home.en.md
home.ru.md

my-awesome-project.en.md
my-awesome-project.ru.md
```

## Устройство файла страницы

Внутри файл состоит из двух главных компонентов:

1. Frontmatter - обязательная начальная область файла страницы, обрамленная тремя тире `---` в начале и в конце. Наиболее близкий по смыслу перевод `Front Matter` на русский: `передний отдел`, `передняя часть`, `передний контент`. Frontmatter хранит внутри себя структурированные данные в формате YAML. Эти  данные используются кодом программы во время компиляции сайта для внедрения метатегов SEO и генерациии содержимого страницы по шаблону.
2. После Frontmatter-а идет собственно **основной текст** в формате Markdown.

### Основной текст

:bulb: Ознакомьтесь с форматом Markdown до начала редактирования!

### Встака видео с YouTube

```html
<iframe src="https://www.youtube.com/embed/2Y-LqBD2HN8" width="600" height="400"></iframe>
```

### Варианты вставки изображений

:bulb: Для быстродействия и SEO **всегда** оптимизируйте ваши изображения в графическом редакторе до публикаци на сайте, устанавливайте их размер согласно рекомендаций по документации и настраивайте качество.

Ширина генерируемых из Markdown изображений настраивается в файле `gatsby-config.js`, константа **maxWidth**.

```js
          {
            resolve: 'gatsby-remark-images',
            options: {
              /**
               * 736px - content column
               * for 100% width
               *
               */
              maxWidth: 736,
              quality: 50,
            },
```

:bulb: Чтобы изображение занимало всю длину колонки в материалах надо подготовить исходный файл с шириной не меньше `736px`.


#### Синтаксис Markdown

Предполагается, что изображения находятся рядом с самим документом в подпапке `/images`.

:exclamation: Важно для SEO! Всегда указывайте ALT текст для изображений, длина до 125 символов!

:bulb: Текст для всплывающей подсказки используется в **Google Images**, поэтому его желательно указывать.
  
:heavy_check_mark: хорошо:

```md
![Альтернативный текст изображения](./images/your-image.jpg "Необязательный текст для всплывающей подсказки")

![Альтернативный текст изображения](./images/your-image.jpg)
```

:x: плохо:

```md
![](./images/your-image.jpg)
```

#### Синтаксис HTML - тег **img**

Если вы не хотите стандартной обработки изображенией генератором статических сайтов или нужно задать особые стили, то поместите изображения в
папку `[PROJECT_DIR]/static/assets/images` отдельно от документа.

##### Одиночное изображение без стилей

:heavy_check_mark: хорошо:

```html
<img 
  src="assets/images/your-image.jpg" 
  alt="Альтернативный текст изображения" 
  title="Необязательный текст всплывающей подсказки"
/>

<img src="assets/images/your-image.jpg" alt="Альтернативный текст изображения"/>
```

:x: плохо:

```html

<img src="assets/images/your-image.jpg" alt="" />
```

##### С предустановленными стилями

|  Имя класса                  | Десктоп                      | Моб
| ---                          | ---                          | ---  
|  left                        | Плывет влево (float: left)   | float: none
|                              | Отступ справа и снизу        | Отступ снизу
|  right                       | Плывет вправо (float: right) | float: none
|                              | Отступ слева и снизу         | Отступ снизу
|  clearfix                    | Сброс плавания               |
|  w-10                        | Ширина 10%                   | Ширина 100%
|  w-20                        | Ширина 20%                   | Ширина 100%
|  w-30                        | Ширина 30%                   | Ширина 100%
|  w-40                        | Ширина 40%                   | Ширина 100%
|  w-50                        | Ширина 50%                   | Ширина 100%
|  w-60                        | Ширина 60%                   | Ширина 100%
|  w-70                        | Ширина 70%                   | Ширина 100%
|  w-80                        | Ширина 80%                   | Ширина 100%
|  w-90                        | Ширина 90%                   | Ширина 100%
|  grid-2                      | 2 колонки                    | 1 колонка
|  grid-3                      | 3 колонки                    | 1 колонка

Пример оформления можно посмотреть [здесь](https://igrig.netlify.app/blog-post-sample/).

Исходный файл `[CONTENT_DIR]/blog/posts/blog-post-sample/index.en.md`.

### Описание полей Frontmatter

Frontmatter внутри себя хранит данные в формате YAML.

Поле состоит из имени на английском и значения после двоеточия.
Поля могут иметь вложенную структуру, например поле **cover**.

Последовательность полей не существенна.

Важны отступы слева перед именем поля и соотношение отступов. Именно отступы и их соотношение задают структуру.

:bulb: Настоятельно рекомендуем ознакомиться с форматом YAML до начала работы с сайтом.

Представленные ниже поля **frontmatter** являются общими для **всех** страниц сайта.

Для комментария используется символ `#`. В реальных исходных данных сайта, как правило, комментарии отсутствуют.

```yaml
---
# Поле title обязательное, уникальное для каждой страницы сайта.
# Выводится с тегом H1
title: Заголовок страницы. По возможности в одно короткое предложение.

# Поле **headline** необязательное.
# Если есть, то уникальное для каждой страницы сайта.
headline: Описание страницы. 1-2 предложения.

# Поле **metaTitle** необязательное.
# Если есть, то уникальное для каждой страницы сайта.
#  Если отсутствует, то поле "title" будет использовано.
metaTitle: для SEO, до 60 сиволов.

# Поле **metaDescription** необязательное. 
# Если есть, то уникальное для каждой страницы сайта.
# Если отсутствует, то поле "headline" будет использовано.
metaDescription: для SEO, до 50-160 сиволов. 

# Поле **cover** необязательное. 
# Это поле составное. Состоит из трех вложенных полей.
cover:
  sm: НЕОБЯЗАТЕЛЬНЫЙ-ФАЙЛ-ИЗОБРАЖЕНИЯ-ДЛЯ-ВАШЕГО-ДОКУМЕНТА.jpg
  xl: НЕОБЯЗАТЕЛЬНЫЙ-ФАЙЛ-ИЗОБРАЖЕНИЯ-ДЛЯ-БОЛЬШИХ-ЭКРАНОВ.jpg
  # Поле alt
  # Текстовая информация отображается при отключенной загрузке графики в браузере.
  alt: для SEO, до 125 символов.
  title: Необязательный текст для всплывающей подсказки

# Поле **slug** необязательное
# только латинница и дефис
slug: уникальный идентификатор страницы
# Во время компиляции язык `ru` или `en` автоматически добавляется к пути
# согласно настроек конфигурации сайта.

# Поле **template** необязательное
# только латинница и дефис
template: имя JavaScript-файла без расширения
# который будет использоваться, как шаблон страницы во время компиляции сайта

# Поле **noindex** необязательное
# Содержит логическое значение
noindex: `true` или `false` 
# Если `true`, то  в head добавляется метатег
# <meta name="robots" content="noindex, follow">
# и страница прячется от поисковых роботов

# Поле **state** необязательное
# Символьное значение, описывает состояние документа
# По умолчанию все документы сразу публикуются
# Если необходимо исключить документ из сайта, то присвойте ему статус черновика - `draft`
state: draft

---
```

Если значение поля должно содержать двоеточие `:` или спецсимвол, то такое значение надо обрамить кавычками. Подробнее в описании формата YAML.

:heavy_check_mark: хорошо:

```yaml
headline: "Описание страницы: продолжение описания после двоеточия"
```

:x: плохо:

```yaml
headline: Описание страницы: продолжение описания после двоеточия
```

### Правила формирования путей

Во время компиляции сайта применяется следующий алгоритм формирования пути:

1. Frontmatter содержит поле **slug**, тогда **slug** будет использован в качестве пути.
2. Frontmatter не содержит поле **slug** и имя самого файла не начинается со слова **index**, тогда имя файла будет использовано в качестве пути.
3. Frontmatter не содержит поле **slug**, а имя файла начинается со слова **index**, тогда имя родительской папки будет использовано в качестве пути.

Во время компиляции к пути, если необходимо, автоматически добавляется язык `ru` или `en` согласно настроек конфигурации сайта.

## Страницы сайта

Если в теле страницы (markdown) исходное изображение шириной меньше 736px, то оно выравнивается по центру с отступами по краям.


:bulb: Согласно требований Google минимальная ширина картинки должна быть не меньше 696px. Иначе она не попадет в **Google Images**. Подробнее [здесь](https://developers.google.com/search/docs/advanced/guidelines/google-images?hl=ru).

### Страница вида "Пост"

Папка: `[CONTENT_DIR]/blog/posts`

Отдельные подпапки для каждого поста.


Для страницы типа **Пост** в frontmatter добавлены дополнительные поля:

```yaml
---
...

# Поле **datePublished** необязательное
# Дата и время первой публикации документа в формате ISO 8601
# 29 ноября 2020 г, 23 часа 59 минут и 59 секунд
datePublished: 2020-11-29T23:59:59Z


# Поле **dateModified** необязательное
# Дата и время последнего редактирования документа в формате ISO 8601
# Если точность до секунд не нужна, то можно указать только дату 
# 31 декабря 2020 г
dateModified: 2020-12-31

# Поле **featured**, необязательное. 
# Содержит логическое значение `false` или `true`. 
# Если `true`, то этот пост будет отображен в сайдбаре в списке постов
featured: false    
---
```

Посты сортируются в порядке убывания даты публикации - поле **datePublished**, т.е. сначала показываются более новые.  

:bulb: Изображение из поля **cover** не выводится автоматически. Поэтому вы должны самостоятельно внедрить его в тело страницы (Markdown).

### Страница вида "Фотопроект"

Папка: `[CONTENT_DIR]/photo-projects/posts`

Устройство аналогично странице вида "Пост"

### Страница вида "Фотоcерия"

Папка: `[CONTENT_DIR]/photo-projects/posts`

Устройство аналогично странице вида "Пост"

В отличие от "Поста" и "Фотопроекта" в карточке поста Excerpt не выводится.

### Собственно Страницы

Папка: `[CONTENT_DIR]/pages`

Как правило, страницы доступны из меню или сайдбара имеют особое назначение - например страницы "404" и "Обо мне".

Для каждого типа страниц на javaScript написан индивидуальный шаблон для вывода секций на экран.

#### Главная страница

Папка: `[CONTENT_DIR]/pages/home`

Файлы: `home.en.md` и `home.ru.md`

На этой странице выводятся в качестве фона спец.изображения № 7-10 и ссылки из Главного меню.

#### Cтраница "Блог"

Папка: `[CONTENT_DIR]/blog/pages/blog`

Файлы: `blog.en.md` и `blog.ru.md`


Поле **cover** из Frontmatter не выводится.

На странице отображается постраничный список всех постов из папки `[CONTENT_DIR]/blog/posts`.

Список постов сортируется по дате публикации: поле `datePublished` из Frontmatter.

Количество постов на одной странице задается константой `CARDS_PER_PAGE` в конфигурации сайта. По умолчанию - 6.

В зависимости от разрешения экрана посты выводятся в одну, две или три колонки.

#### Cтраница "Список тегов"

Папка: `[CONTENT_DIR]/blog/pages/tag-list`

Файлы: `tag-list.en.md` и `tag-list.ru.md`

На странице выводится сгруппированный список всех тегов, найденных в постах, и количество постов по каждому тегу. Кликнувши на тег можно перейти на страницу "Путешествия с тегом:".


#### Cтраница "Путешествия с тегом: ????"

Папка: `[CONTENT_DIR]/blog/pages/tags`

Файлы: `tags.en.md` и `tags.ru.md`

Устройство налогично странице "Блог".

На странице отображается результы выборки всех всех постов из папки `[CONTENT_DIR]/blog/posts`, отфильтрованных по одному тегу.


#### Cтраница "Фотопроекты"

Папка: `[CONTENT_DIR]/photo-projects/pages/photo-projects`

Файлы: `photo-projects.en.md` и `photo-projects.ru.md`

Устройство налогично странице "Блог".

На странице отображается постраничный список всех постов из папки `[CONTENT_DIR]/photo-projects/posts`.

#### Cтраница "Фотоcерии"

Папка: `[CONTENT_DIR]/photo-series/pages/photo-series`

Файлы: `photo-series.en.md` и `photo-series.ru.md`

Устройство налогично странице "Блог".

На странице отображается постраничный список всех постов из папки `[CONTENT_DIR]/photo-series/posts`.

#### Cтраница "Обо мне / Контакты"

Папка: `[CONTENT_DIR]/pages/contacts`

Файлы: `contacts.en.md` и `contacts.ru.md`

Данные для страницы "Контакты" хранятся во вспомогательных файлах:

- `contacts.yaml`
- `address.{locale}.yaml`

#### Cтраница "404"

Папка: `[CONTENT_DIR]/pages/404`

Файлы: `404.en.md` и `404.ru.md`

Поле **cover** из Frontmatter не выводится.

Поле **noindex** игнорируется и всегда `true`.

:warning: Для русскоязычных ненайденных страниц задан редирект:

|   Откуда     | Куда       | Статус
|---           |---         |---
| /ru/*        |  /ru/404   | 404

*Файл с редиректами: `[PROJECT_DIR]/static/_redirects`*


## Данные для формирования элементов сайта

### Общие для всех языков

Папка: `[CONTENT_DIR]/data/`

Файл: `contacts.yaml`

#### Список полей

|   Поле           | Назначение         |   Organization | LocalBusiness | Описание
|---               |---                 |---             |---            |---
| organizationType | SEO                |                |               | [Organization](https://schema.org/Organization), [LocalBusiness](https://schema.org/LocalBusiness)
| whatsapp         | страница Котнтакты |                |               |
| telegram         | страница Котнтакты |                |               |
| phone            | SEO                | да             | да            | [телефон](https://schema.org/telephone) список цифровых значений, разделитель элементов `,`
| e-mail           | SEO                | да             | да            | [почта](https://schema.org/email) список, разделитель элементов `,`
| foundingDate     | футер и SEO        | да             | да            | [дата основания](https://schema.org/foundingDate) в формате ISO 8601

Поля **e-mail** и **phone** участвуют в структурированных данных для **Organization** или **LocalBusiness**. Используется только первый элемент массива.


:bulb: Номер телефона допускает только цифры, без плюса спереди, без пробелов, скобок и прочих символов.

Пример содержимого:

```yaml
organizationType: LocalBusiness

phone: [3803161111]

email: [igrig@gmail.com]

foundingDate: 2021-01-01

```


### Языкозависимые данные

Папка: `[CONTENT_DIR]/data/locales`

| Что                | Папка           | Имя файла            | Комментарий
| ------------       | --------------- | -------------------  | -------------------
| Главное меню       | ./main-nav      | main-nav.en.yaml     |
|                    |                 | main-nav.ru.yaml     |
| Ссылки на соц.сети | ./social-links  | social-links.en.yaml | Facebook, Intagram и тд
|                    |                 | social-links.ru.yaml |
| Адрес              | ./address       | address.en.yaml      | Официальное название организации, почтовый адрес, подробное описание контактов
|                    |                 | address.ru.yaml      |
| Переводы           | ./translations  | translations.en.yaml | Для внутреннего использования
|                    |                 | translations.ru.yaml |

#### Главное меню

Список полей

|   Поле       | Описание
|---           |---
| to           | путь к странице без префикса языка, но со слешем в конце. Пример: `/contacts/`
| title        | название ссылки

#### Ссылки на социальные сети

Ссылки на профили в соц.сетях отображаются в футере сайта в виде иконок.

Список полей

|   Поле       | Описание
|---           |---
| to           | ссылка на ваш профиль в социальной сети
| title        | всплывающая подсказка
| code         | код соц.сети


При наведении курсора мыши на иконку выводится всплывающая подсказка (поле **title**).


:warning: Поле **код** используется для построения SEO и для вывода иконки.

Для добавления соц.сетей, отличных от Instagram и Facebook, нужен программист.


#### Адрес

Содержимое этого файла используется на странице "Контакты" и SEO.

Поле **e-mail** в виде списка, разделитель элементов списка запятая `,`.


Поле **telephone** в виде списка цифровых значений, разделитель элементов списка запятая `,`.

:bulb: Номер телефона допускает только цифры, без плюса спереди, без пробелов, скобок и прочих символов.

Пример содержимого:

```yaml
name: Your company name
alternateName: Your company name
legalName: Your company descriptin

postalAddress:
  streetAddress:
    - 1 Downing St., app.1
  addressLocality:  Odessa
  addressRegion: 
  postalCode: 
  addressCountry: Ukraine
```

#### Переводы

Переводы используются только в коде программы. Поэтому не предполагается их редактирование.

Если все же возникла такая потребность, то:

- Отредактируйте соответствующий `JSON` файл в папке `[CONTENT_DIR]/data/locales/translations/src/`.
- Зайдите в командную строку, перейдите в папку `[PROJECT_DIR]` и выполните команду `yarn trans`.
  Эта команда запустит javascript-скрипт, который преобразует файл c переводами из формата `JSON` в `YAML` (Вам потребуется предварительно установить на локальный компьютер **nodejs** и **yarn**).

  :bulb: Для автоматического обновления переводов во время `commit`-a потребуется дополнительно установить **husky** и **lint-staged**.
- выполните действия из раздела **[Публикация изменений](#публикация-изменений)**.
